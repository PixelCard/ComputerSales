@model ComputerSales.Domain.Entity.EAccount.AccountBlock

@if (Model != null)
{
    <div id="blockOverlay" class="overlay" onclick="closeBlockPopup(event)">
        <div class="block-card" onclick="event.stopPropagation()">
            <h2 class="text-xl font-semibold text-red-600 mb-3">Tài khoản bị khóa</h2>

            <div class="text-sm text-gray-800 space-y-1">
                <p><strong>Mã khóa (BlockId):</strong> @Model.BlockId</p>
                <p><strong>ID tài khoản:</strong> @Model.IDAccount</p>
                <p>
                    <strong>Thời gian khóa:</strong>
                    @{
                        if (Model.BlockFromUtc != null)
                        {
                            var fromVn = TimeZoneInfo.ConvertTimeFromUtc(
                            DateTime.SpecifyKind(Model.BlockFromUtc, DateTimeKind.Utc),
                            TimeZoneInfo.FindSystemTimeZoneById("SE Asia Standard Time")
                            );
                            if (Model.BlockToUtc.HasValue)
                            {
                                var toVn = TimeZoneInfo.ConvertTimeFromUtc(
                                DateTime.SpecifyKind(Model.BlockToUtc.Value, DateTimeKind.Utc),
                                TimeZoneInfo.FindSystemTimeZoneById("SE Asia Standard Time")
                                );
                                @($"{fromVn:dd/MM/yyyy HH:mm} → {toVn:dd/MM/yyyy HH:mm}")
                            }
                            else
                            {
                                @($"{fromVn:dd/MM/yyyy HH:mm} → Vĩnh viễn")
                            }
                        }
                    }
                </p>
                <p><strong>Lý do:</strong> @Model.ReasonBlock</p>
            </div>

            <button class="close-btn mt-4" onclick="closeBlockPopup()">Đóng</button>
        </div>
    </div>

    <style>
        .overlay {
            position: fixed;
            inset: 0;
            background-color: rgba(0,0,0,0.6);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            animation: fadeIn 0.3s ease;
        }

        .block-card {
            background-color: #fff;
            border-radius: 10px;
            padding: 24px 32px;
            width: 380px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            animation: scaleIn 0.3s ease;
            text-align: left;
        }

        .close-btn {
            background: #d32f2f;
            color: #fff;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            width: 100%;
        }

            .close-btn:hover {
                background: #b71c1c;
            }
        keyframes fadeIn {
            from

        {
            opacity: 0;
        }

        to {
            opacity: 1;
        }

        }
        keyframes scaleIn {
            from

        {
            transform: scale(0.9);
            opacity: 0;
        }

        to {
            transform: scale(1);
            opacity: 1;
        }

        }
    </style>

    <script>
        function closeBlockPopup(event) {
            const overlay = document.getElementById('blockOverlay');
            if (!event || event.target === overlay) {
                overlay.remove();
            }
        }
    </script>
}
